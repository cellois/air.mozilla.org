language: minimal
branches:
  except:
  - "/^flux-*/"
services:
- docker
script:
- docker build -t airmozilla .
- docker tag airmozilla "itsre/airmozilla:$TRAVIS_BRANCH-$TRAVIS_COMMIT"
- docker images
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- docker push "itsre/airmozilla:$TRAVIS_BRANCH-$TRAVIS_COMMIT"
- if [ "$TRAVIS_TAG" != "" ]; then docker tag airmozilla "itsre/airmozilla:$TRAVIS_TAG"; done
- if [ "$TRAVIS_TAG" != "" ]; then docker push "itsre/airmozilla:$TRAVIS_TAG"; done
env:
  global:
  - secure: u9cJ0DpUHAN2hjI3U+WnaP6oN9EXB9gYIBTpKwvb/iLBjN1qHklLiO7O1eQVrt93A0GVEiseRPCEG4CqkVlqtM7SziuMv6dZX4Fp9ydlxicLtoXqAeapXKtYce1xtgB65yBMOHxFigOnNkVp0GAklb5dukF4oGVmg6ni37qshCky2sjOL0zabA1bpgcAM4rrU3590DFCdPBJOD9v49G6sRvBByWQEcEQSduVJsTV30jmRlX+BOtFG7t+vBG3BCXqB/Oa6zSR+Y9/GgtPvubMHnUEti+4WTO4rL+gnRBmGEOc1PdCVtJIP2Gg6Y+D971uLTOl8dI7F6jRPO8thf9Ye+83W/hg75wEilLwK0yeWuSQZpn6luUzurcbZyiPh2nEFXgZSDgFu2pxtal1yihRLJp3LMESr+21IFpwFwLnlY3aHpe3a4R9acI0D8ZZi9fhBrWoCSLinS0L68nBR2nJQW56U/lwosUoJWAVZ3p99Dz4fpZvDebuuezrwRU4ywx4Rl5+Z7N6ig4SrkrHxFpuoUizJDqJN/YvEPswtgbr05L/agIiMmwuqjGC4j3pw8eT7+YEkLsOY1bW1ozUvZ+eTnDvHUiMV6Vvj+ASEcFJhfdMNXn8ha+DLvH1jL28/qBzJnw7c0z1PufUHPMaWR4oUcuVRWY5kus5YA813JPC4y4=
  - secure: Dp5YCYcHGGv/b9lj/8myVWmhfTHNKHRIEVRvpUoktDtFJ9NF8FOBrtWjeZGgu5ZZ/aLc6+7VljZA787kNg+gTPwPOeEbEyrORXmJx1bjCFTwvwdctZJ71rcwq/F4ytKTzTgunfA/leltbr3c0Yumc4MeQfZRw1YM7KC7jwFBmqZG4QNfv7JGUNqBL7Ja2gMEB+fD+bvY+3NkF92FOB4eKkKs7mjucu8koWxw75U7SSlaougOaJ/V2BRpnqTK4iDnIy6EkMqYJynU/iIctQ8doPSwYx0WvgWGPwujWx6Tgp6wBYIjSIAB1/o47VNUxiOBAIZeOHJsDV0BHKU/y9C4iiYVQWEYFQ3R+5AImWxi+AyDS1OYC3U7qyxFKtXywcfg/vACtDF/QE0GWh3Kdb8wL3VsFfKdZ3rH+APqlmuJ4cOYcMkGJ5QjLYiZYQtc08bgEFVNLS//LqV7SrmYdO/676pJiqsxJzOeUn5J/CekSSFpJyfxfTuuO9Gh/dL2CloTBdAfnrVV1R6/efRpYzvCOmfKh4vKUcObBJ2ngxzKXFd/c/OvJVcmwid1nZLrwjgvBA23CFdrfdeLXLKAQ+DUpPFS5KIDawK8qlrJhRx0i8yPMv71UDAnWoQsPBlVILOuWDS2rOkKaoZRyBNd5MVs/MSnB7uljQPdbY6PEEeQHIk=
notifications:
  slack:
    secure: JmYu6s3PPfLts43WE7lkc5lmbLMYkMZw+Dz0RYOC5Y0vmfmyTEeHDa75YiTOYLeDnkGxedsiMsZ7u4wbIesMst3lbNOYBdEX+UOvp+/oI2+OSOEitdzVhAXC65knPp4wPJCOM5cq5gqOcg+Mhz+uo/MzZebGtLmuuLNfAMcv+M/B5HcQNSmqT9v3waaNQRJjONI5zqS4b+VQJLWvFAjQTR7FV+Jbo5Q1vxz+75c0EL1xjTE5zbHWgYfSUjgEB3N32mEVmxVwdms+yfbk2wLa3uITgfHjUZRye5QMyFEpOAG5fprm7n/jpWc0ab9nkIx/nmMeSBP8vuQt7FCYGOpvLBrZ1f7P9AIuuDa3ULm2ftCtsQejfPsjDKXhqd3Yw9troAgU0sIGJVErviZ3GEZiqISIyPPNS+uAJ7ljtBYNB2kEueuDJjIN9uKFM+36m/AiUQeYcRouKjbU4DyZ8ILAUUx8SLTaMZCzzN16yn4dzT/M9dHHhQGGbQ2uiPZJGrBE6H9wgrH36ALfn1WkBP0uh//T5JMTdkVgH1mHeGX7dLN82rtDkxZf5RkZo0e91YxRDYN2iPTEyhRA68gJ81oxpV28Lpo35RngOCSrLc7lV2KSmgXj4VL2Bap+mBMAJi5GvsHisJFr8EoeBzBXUrk/yD9egRrEETxgdoEIBOGEUmc=
